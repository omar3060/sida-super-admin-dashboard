(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5298],{16807:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var a=s(95155),l=s(6874),r=s.n(l);function n(){return(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"footer d-sm-flex align-items-center justify-content-between border-top bg-white p-3",children:[(0,a.jsx)("p",{className:"mb-0",children:"2014 - 2025 \xa9 DreamsPOS. All Right Reserved"}),(0,a.jsxs)("p",{children:["Designed & Developed by"," ",(0,a.jsx)(r(),{href:"#",className:"text-primary",children:"Dreams"})]})]})})}},24706:(e,t,s)=>{"use strict";s.d(t,{default:()=>c});var a=s(95155),l=s(12115),r=s(11557),n=s(6874),i=s.n(n);let c=()=>{let[e,t]=(0,l.useState)(!1),s=()=>{let s=!e;t(s),s?document.body.classList.add("header-collapse"):document.body.classList.remove("header-collapse")};return(0,a.jsx)("li",{className:"collapse-icons",children:(0,a.jsx)(r.A,{title:"Collapse",children:(0,a.jsx)(i(),{href:"#",id:"collapse-header",className:"".concat(e?"active":""),onClick:e=>{e.preventDefault(),s()},children:(0,a.jsx)("i",{className:"ti ".concat(e?"ti-chevron-down":"ti-chevron-up")})})})})}},38947:(e,t,s)=>{Promise.resolve().then(s.bind(s,70937))},70937:(e,t,s)=>{"use strict";s.d(t,{default:()=>j});var a=s(95155),l=s(12115),r=s(16807),n=s(24706),i=s(29911);let c="https://super-admin-eta.vercel.app",o="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4M2M0OTZhNzU5OGY3MzM4MWZjMTg0ZiIsImlhdCI6MTc0ODc4MjA4N30.0JHq33-UvdODuUhfgGFYATU4J_1hG--vkMt1oqiFIZ4",d=async()=>{try{let e=await fetch("".concat(c,"/section/slider/home/partners"),{method:"GET",headers:{Authorization:"Bearer ".concat(o)}});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let t=await e.json();console.log("\uD83D\uDCE1 Raw API response:",t);let s=t.slider||t,a={...s,title:"string"==typeof s.title?JSON.parse(s.title):s.title,content:"string"==typeof s.content?JSON.parse(s.content):s.content};return console.log("✅ Parsed slider data:",a),a}catch(e){throw console.error("❌ Error fetching partners slider:",e),e}},h=async(e,t,s)=>{try{let a=await fetch("".concat(c,"/section/updateslider/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"bearer ".concat(o)},body:JSON.stringify({title:t,content:s})});if(!a.ok){let e=await a.text();throw Error("HTTP error! status: ".concat(a.status,", response: ").concat(e))}return await d()}catch(e){throw console.error("Error updating title/content:",e),e}},m=async(e,t,s,a)=>{try{console.log("\uD83D\uDD27 Adding new slide with correct structure"),console.log("SlideID:",e),console.log("Image:",null==t?void 0:t.name,null==t?void 0:t.size),console.log("Title:",s),console.log("Content:",a);let l=new FormData;for(let[e,r]of(l.append("arabic",JSON.stringify({title:s.arabic||"",content:a.arabic||""})),l.append("english",JSON.stringify({title:s.english||"",content:a.english||""})),l.append("image",t),console.log("\uD83D\uDCE4 FormData contents:"),l.entries()))console.log("".concat(e,":"),r instanceof File?"File: ".concat(r.name," (").concat(r.size," bytes)"):r);let r=await fetch("".concat(c,"/section/slider/").concat(e),{method:"PUT",headers:{Authorization:"Bearer ".concat(o)},body:l});console.log("\uD83D\uDCE1 Response status:",r.status);let n=await r.text();if(console.log("\uD83D\uDCE1 Raw response:",n),!r.ok)throw Error("HTTP error! status: ".concat(r.status,", response: ").concat(n));return await d()}catch(e){throw console.error("❌ Error adding slide:",e),e}},u=async(e,t,s,a,l)=>{try{console.log("\uD83D\uDD27 Updating slide:",e);let r=new FormData;void 0!==s&&r.append("title",s),void 0!==a&&r.append("content",a),void 0!==l&&r.append("text",l),t&&r.append("image",t);let n=await fetch("".concat(c,"/section/slider/home/partners/").concat(e),{method:"PATCH",headers:{Authorization:"Bearer ".concat(o)},body:r});if(!n.ok){let e=await n.text();throw Error("HTTP error! status: ".concat(n.status,", response: ").concat(e))}return await d()}catch(e){throw console.error("❌ Error updating slide:",e),e}},b=async e=>{try{console.log("\uD83D\uDDD1️ Force deleting broken slide:",e);let t=await fetch("".concat(c,"/section/slider/home/partners/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(o)}});console.log("\uD83D\uDCE1 Delete response status:",t.status);let s=await t.text();console.log("\uD83D\uDCE1 Delete response:",s);let a=await d();if(a.slides.some(t=>t._id===e)){if(!t.ok)throw Error("HTTP error! status: ".concat(t.status,", response: ").concat(s))}else console.log("✅ Broken slide was successfully removed from database");return a}catch(t){console.error("❌ Error deleting broken slide:",t);try{let t=await d();if(!t.slides.some(t=>t._id===e))return console.log("✅ Broken slide was removed despite API error"),t}catch(e){}throw t}},x=async e=>{try{console.log("\uD83D\uDDD1️ Deleting slide:",e);let t=await fetch("".concat(c,"/section/slider/home/partners/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(o)}});if(!t.ok){let e=await t.text();throw Error("HTTP error! status: ".concat(t.status,", response: ").concat(e))}return await d()}catch(e){throw console.error("❌ Error deleting slide:",e),e}},j=()=>{var e,t,s,c;let[o,j]=(0,l.useState)(null),[p,g]=(0,l.useState)(!0),[f,v]=(0,l.useState)(null),[y,N]=(0,l.useState)(!1),[w,C]=(0,l.useState)(!1),[O,k]=(0,l.useState)(null),[E,S]=(0,l.useState)(null),[P,D]=(0,l.useState)(!1),[T,A]=(0,l.useState)(null);(0,l.useEffect)(()=>{I()},[]);let I=async()=>{try{g(!0);let e=await d();j(e),v(null)}catch(e){v(e instanceof Error?e.message:"Failed to load partners data")}finally{g(!1)}},_=()=>{N(!1),k(null)},z=()=>{C(!1),S(null),D(!1),A(null)},F=async()=>{if(O)try{g(!0),v(null),await h(O._id,O.title,O.content),await I(),N(!1),k(null)}catch(e){v(e instanceof Error?e.message:"Failed to save partners data")}finally{g(!1)}},J=e=>{S(e),D(!0),C(!0)},M=async()=>{if(!T||!o){v("Please select an image file");return}try{if(g(!0),v(null),P&&E)await u(E._id,T);else{let e={arabic:"",english:""};await m(o._id,T,e,e)}await I(),C(!1),S(null),D(!1),A(null)}catch(e){v(e instanceof Error?e.message:"Failed to save slide")}finally{g(!1)}},H=async e=>{if(window.confirm("Are you sure you want to delete this slide?"))try{g(!0),v(null),await x(e),await I()}catch(e){v(e instanceof Error?e.message:"Failed to delete slide")}finally{g(!1)}},U=(e,t,s)=>{O&&k({...O,[e]:{...O[e],[s]:t}})},B=async()=>{if(!o)return;let e=o.slides.filter(e=>!e.image);if(0===e.length){alert("No broken slides found!");return}if(window.confirm("Found ".concat(e.length," broken slides without images. Delete them all?")))try{for(let t of(g(!0),v(null),e))console.log("\uD83D\uDDD1️ Deleting broken slide: ".concat(t._id)),await b(t._id);await I(),alert("Successfully deleted ".concat(e.length," broken slides!"))}catch(e){v(e instanceof Error?e.message:"Failed to clean broken slides")}finally{g(!1)}};return p&&!o?(0,a.jsxs)("div",{className:"page-wrapper",children:[(0,a.jsx)("div",{className:"content",children:(0,a.jsx)("div",{className:"card",children:(0,a.jsx)("div",{className:"card-body text-center",children:(0,a.jsx)("h5",{children:"Loading partners data..."})})})}),(0,a.jsx)(r.A,{})]}):f?(0,a.jsxs)("div",{className:"page-wrapper",children:[(0,a.jsx)("div",{className:"content",children:(0,a.jsx)("div",{className:"card",children:(0,a.jsxs)("div",{className:"card-body text-center",children:[(0,a.jsxs)("h5",{className:"text-danger",children:["Error: ",f]}),(0,a.jsx)("button",{className:"btn btn-primary mt-2",onClick:I,children:"Try Again"})]})})}),(0,a.jsx)(r.A,{})]}):(0,a.jsxs)("div",{className:"page-wrapper",children:[(0,a.jsxs)("div",{className:"content",children:[(0,a.jsxs)("div",{className:"d-lg-flex align-items-center justify-content-between mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"mb-1",children:"Partners Slider Management"}),(0,a.jsx)("p",{children:"Manage your website partners slider content and images"})]}),(0,a.jsxs)("ul",{className:"table-top-head",children:[(0,a.jsx)("li",{children:(0,a.jsxs)("button",{className:"btn btn-primary me-2",onClick:()=>{o&&(k({...o}),N(!0))},disabled:p,children:[(0,a.jsx)(i.uO9,{className:"me-1"})," Edit Content"]})}),(0,a.jsx)("li",{children:(0,a.jsxs)("button",{className:"btn btn-success",onClick:()=>{S(null),D(!1),C(!0)},disabled:p,children:[(0,a.jsx)(i.OiG,{className:"me-1"})," Add Slide"]})}),(0,a.jsx)("li",{children:(0,a.jsxs)("button",{className:"btn btn-danger",onClick:B,disabled:p,children:[(0,a.jsx)(i.qbC,{className:"me-1"})," Clean Broken Slides"]})}),(0,a.jsx)(n.default,{})]})]}),o&&(0,a.jsxs)("div",{className:"card mb-4",children:[(0,a.jsx)("div",{className:"card-header",children:(0,a.jsx)("h5",{className:"card-title",children:"Content Information"})}),(0,a.jsx)("div",{className:"card-body",children:(0,a.jsxs)("div",{className:"row",children:[(0,a.jsxs)("div",{className:"col-md-6",children:[(0,a.jsx)("h6",{className:"text-primary",children:"English"}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Title:"})," ",o.title.english]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Content:"})," ",o.content.english]})]}),(0,a.jsxs)("div",{className:"col-md-6",children:[(0,a.jsx)("h6",{className:"text-success",children:"Arabic"}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"العنوان:"})," ",o.title.arabic]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"المحتوى:"})," ",o.content.arabic]})]})]})})]}),(0,a.jsx)("div",{className:"card",children:(0,a.jsx)("div",{className:"card-body",children:(0,a.jsx)("div",{className:"table-responsive",children:(0,a.jsxs)("table",{className:"table table-hover",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"ID"}),(0,a.jsx)("th",{children:"Image"}),(0,a.jsx)("th",{children:"Public ID"}),(0,a.jsx)("th",{children:"Actions"})]})}),(0,a.jsx)("tbody",{children:o&&o.slides.length>0?o.slides.map(e=>{var t;return(0,a.jsxs)("tr",{children:[(0,a.jsxs)("td",{children:[e._id.substring(0,8),"..."]}),(0,a.jsx)("td",{children:e.image&&e.image.secure_url?(0,a.jsx)("img",{src:e.image.secure_url,alt:"Partner",style:{width:"60px",height:"40px",objectFit:"cover"},className:"rounded"}):(0,a.jsx)("div",{style:{width:"60px",height:"40px",backgroundColor:"#f8f9fa",border:"1px dashed #dee2e6",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px"},children:"No Image"})}),(0,a.jsx)("td",{children:(null===(t=e.image)||void 0===t?void 0:t.public_id)||"N/A"}),(0,a.jsxs)("td",{children:[(0,a.jsx)("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>J(e),children:(0,a.jsx)(i.uO9,{})}),(0,a.jsx)("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>H(e._id),children:(0,a.jsx)(i.qbC,{})})]})]},e._id)}):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:4,className:"text-center",children:"No slides available"})})})]})})})})]}),y&&O&&(0,a.jsx)("div",{className:"modal fade show",style:{display:"block"},children:(0,a.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-lg",children:(0,a.jsxs)("div",{className:"modal-content",children:[(0,a.jsxs)("div",{className:"modal-header",children:[(0,a.jsx)("h5",{className:"modal-title",children:"Edit Partners Content"}),(0,a.jsx)("button",{type:"button",className:"btn-close",onClick:_})]}),(0,a.jsxs)("div",{className:"modal-body",children:[(0,a.jsxs)("ul",{className:"nav nav-tabs mb-3",children:[(0,a.jsx)("li",{className:"nav-item",children:(0,a.jsx)("a",{className:"nav-link active","data-bs-toggle":"tab",href:"#english-content",children:"English"})}),(0,a.jsx)("li",{className:"nav-item",children:(0,a.jsx)("a",{className:"nav-link","data-bs-toggle":"tab",href:"#arabic-content",children:"Arabic"})})]}),(0,a.jsxs)("div",{className:"tab-content",children:[(0,a.jsxs)("div",{className:"tab-pane active",id:"english-content",children:[(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("label",{className:"form-label",children:"Title"}),(0,a.jsx)("input",{type:"text",className:"form-control",value:(null===(e=O.title)||void 0===e?void 0:e.english)||"",onChange:e=>U("title",e.target.value,"english")})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("label",{className:"form-label",children:"Content"}),(0,a.jsx)("textarea",{className:"form-control",rows:4,value:(null===(t=O.content)||void 0===t?void 0:t.english)||"",onChange:e=>U("content",e.target.value,"english")})]})]}),(0,a.jsxs)("div",{className:"tab-pane",id:"arabic-content",children:[(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("label",{className:"form-label",children:"العنوان"}),(0,a.jsx)("input",{type:"text",className:"form-control",value:(null===(s=O.title)||void 0===s?void 0:s.arabic)||"",onChange:e=>U("title",e.target.value,"arabic"),dir:"rtl"})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("label",{className:"form-label",children:"المحتوى"}),(0,a.jsx)("textarea",{className:"form-control",rows:4,value:(null===(c=O.content)||void 0===c?void 0:c.arabic)||"",onChange:e=>U("content",e.target.value,"arabic"),dir:"rtl"})]})]})]})]}),(0,a.jsxs)("div",{className:"modal-footer",children:[(0,a.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:_,children:"Cancel"}),(0,a.jsx)("button",{type:"button",className:"btn btn-primary",onClick:F,disabled:p,children:p?"Saving...":"Save Changes"})]})]})})}),w&&(0,a.jsx)("div",{className:"modal fade show",style:{display:"block"},children:(0,a.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:(0,a.jsxs)("div",{className:"modal-content",children:[(0,a.jsxs)("div",{className:"modal-header",children:[(0,a.jsx)("h5",{className:"modal-title",children:P?"Edit Slide":"Add New Slide"}),(0,a.jsx)("button",{type:"button",className:"btn-close",onClick:z})]}),(0,a.jsxs)("div",{className:"modal-body",children:[(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsxs)("label",{className:"form-label",children:[(0,a.jsx)(i.dkL,{className:"me-2"}),"Select Image"]}),(0,a.jsx)("input",{type:"file",className:"form-control",accept:"image/*",onChange:e=>{e.target.files&&e.target.files[0]&&A(e.target.files[0])}}),T&&(0,a.jsxs)("small",{className:"text-muted",children:["Selected: ",T.name]})]}),P&&E&&E.image&&E.image.secure_url&&(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("label",{className:"form-label",children:"Current Image"}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("img",{src:E.image.secure_url,alt:"Current slide",className:"img-fluid rounded",style:{maxHeight:"200px"}})})]})]}),(0,a.jsxs)("div",{className:"modal-footer",children:[(0,a.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:z,children:"Cancel"}),(0,a.jsx)("button",{type:"button",className:"btn btn-primary",onClick:M,disabled:p||!T,children:p?"Saving...":P?"Update Slide":"Add Slide"})]})]})})}),(0,a.jsx)(r.A,{})]})}},74436:(e,t,s)=>{"use strict";s.d(t,{k5:()=>d});var a=s(12115),l={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},r=a.createContext&&a.createContext(l),n=["attr","size","title"];function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,a)}return s}function o(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach(function(t){var a,l,r;a=e,l=t,r=s[t],(l=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(l))in a?Object.defineProperty(a,l,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[l]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function d(e){return t=>a.createElement(h,i({attr:o({},e.attr)},t),function e(t){return t&&t.map((t,s)=>a.createElement(t.tag,o({key:s},t.attr),e(t.child)))}(e.child))}function h(e){var t=t=>{var s,{attr:l,size:r,title:c}=e,d=function(e,t){if(null==e)return{};var s,a,l=function(e,t){if(null==e)return{};var s={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;s[a]=e[a]}return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(l[s]=e[s])}return l}(e,n),h=r||t.size||"1em";return t.className&&(s=t.className),e.className&&(s=(s?s+" ":"")+e.className),a.createElement("svg",i({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,l,d,{className:s,style:o(o({color:e.color||t.color},t.style),e.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),c&&a.createElement("title",null,c),e.children)};return void 0!==r?a.createElement(r.Consumer,null,e=>t(e)):t(l)}}},e=>{var t=t=>e(e.s=t);e.O(0,[6711,6874,1792,1557,8441,1684,7358],()=>t(38947)),_N_E=e.O()}]);