(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8345],{11753:(e,t,a)=>{Promise.resolve().then(a.bind(a,18360))},16807:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var r=a(95155),s=a(6874),l=a.n(s);function n(){return(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"footer d-sm-flex align-items-center justify-content-between border-top bg-white p-3",children:[(0,r.jsx)("p",{className:"mb-0",children:"2014 - 2025 \xa9 DreamsPOS. All Right Reserved"}),(0,r.jsxs)("p",{children:["Designed & Developed by"," ",(0,r.jsx)(l(),{href:"#",className:"text-primary",children:"Dreams"})]})]})})}},18360:(e,t,a)=>{"use strict";a.d(t,{default:()=>u});var r=a(95155),s=a(12115),l=a(16807),n=a(24706),i=a(29911);let c="https://super-admin-eta.vercel.app/plan",o="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4M2M0OTZhNzU5OGY3MzM4MWZjMTg0ZiIsImlhdCI6MTc0ODc4MjA4N30.0JHq33-UvdODuUhfgGFYATU4J_1hG--vkMt1oqiFIZ4",d={getPlans:async()=>{let e=await fetch(c,{headers:{Authorization:"Bearer ".concat(o)}});if(!e.ok)throw Error("Failed to fetch plans");return e.json()},createPlan:async e=>{let t=await fetch(c,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify(e)}),a=await t.text();if(!t.ok)throw Error(a||"Failed to create plan");try{return JSON.parse(a)}catch(e){return a}},updatePlan:async(e,t)=>{let{_id:a,__v:r,...s}=t;try{let t;let a=await fetch("".concat(c,"/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify(s)}),r=await a.text();if(!a.ok){if(r.includes("plan name already exists")){let t;let{english:a,arabic:r,...l}=s,n={...l,english:{description:a.description,features:a.features},arabic:{description:r.description,features:r.features}},i=await fetch("".concat(c,"/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify(n)}),d=await i.text();if(!i.ok)throw Error(d||"HTTP ".concat(i.status,": ").concat(i.statusText));try{t=JSON.parse(d)}catch(e){t=d}return t}let t="Failed to update plan";try{var l;let e=JSON.parse(r);t=e.message||e.error||(null===(l=e.errors)||void 0===l?void 0:l.join(", "))||t}catch(e){t=r||"HTTP ".concat(a.status,": ").concat(a.statusText)}throw Error(t)}try{t=JSON.parse(r)}catch(e){t=r}return t}catch(e){throw e}},deletePlan:async e=>{let t=await fetch("".concat(c,"/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(o)}});if(!t.ok)throw Error("Failed to delete plan");return t.json()}};function u(){var e,t,a,c,o,u;let[h,m]=(0,s.useState)([]),[v,p]=(0,s.useState)(!0),[b,j]=(0,s.useState)(null),[x,f]=(0,s.useState)(!1),[N,y]=(0,s.useState)(null),[g,w]=(0,s.useState)(!1);(0,s.useEffect)(()=>{O()},[]);let O=async()=>{try{p(!0);let e=await d.getPlans(),t=[];if(e.plans&&Array.isArray(e.plans))t=e.plans;else if(Array.isArray(e))t=e;else throw Error("Invalid data format from API");m(t),j(null)}catch(e){j(e instanceof Error?e.message:"Failed to load plans")}finally{p(!1)}},C=()=>({_id:"",english:{name:"",description:"",features:[""]},arabic:{name:"",description:"",features:[""]},price:0,activeFeatures:[]}),k=e=>{y({...e}),w(!0),f(!0)},P=()=>{f(!1),y(null)},A=async e=>{if(window.confirm("Are you sure you want to delete this plan?"))try{await d.deletePlan(e),m(h.filter(t=>t._id!==e))}catch(e){j(e instanceof Error?e.message:"Failed to delete plan")}},E=(e,t)=>{if(t)m([...h,e]);else{var a,r,s,l,n,i,c,o,d,u,v,p;let t={_id:(null==N?void 0:N._id)||e._id,english:{name:(null==N?void 0:null===(a=N.english)||void 0===a?void 0:a.name)||(null===(r=e.english)||void 0===r?void 0:r.name)||"",description:(null==N?void 0:null===(s=N.english)||void 0===s?void 0:s.description)||(null===(l=e.english)||void 0===l?void 0:l.description)||"",features:(null==N?void 0:null===(n=N.english)||void 0===n?void 0:n.features)||(null===(i=e.english)||void 0===i?void 0:i.features)||[]},arabic:{name:(null==N?void 0:null===(c=N.arabic)||void 0===c?void 0:c.name)||(null===(o=e.arabic)||void 0===o?void 0:o.name)||"",description:(null==N?void 0:null===(d=N.arabic)||void 0===d?void 0:d.description)||(null===(u=e.arabic)||void 0===u?void 0:u.description)||"",features:(null==N?void 0:null===(v=N.arabic)||void 0===v?void 0:v.features)||(null===(p=e.arabic)||void 0===p?void 0:p.features)||[]},price:(null==N?void 0:N.price)||e.price||0,activeFeatures:(null==N?void 0:N.activeFeatures)||e.activeFeatures||[],__v:e.__v};m(h.map(e=>e._id===(null==N?void 0:N._id)?t:e))}},_=async()=>{if(N)try{let e;if(p(!0),j(null),N._id&&""!==N._id){let{_id:t,__v:a,...r}=N;e=await d.updatePlan(N._id,r),E(e,!1)}else{let{_id:t,__v:a,...r}=N;e=await d.createPlan(r),E(e,!0)}f(!1),y(null)}catch(e){j(e instanceof Error?e.message:"Failed to save plan")}finally{p(!1)}},S=(e,t,a)=>{N&&(a?y({...N,[a]:{...N[a],[e]:t}}):y({...N,[e]:t}))},F=(e,t,a)=>{if(!N)return;let r=[...N[a].features];r[e]=t,S("features",r,a)},T=e=>{N&&S("features",[...N[e].features,""],e)},I=(e,t)=>{N&&!(N[t].features.length<=1)&&S("features",N[t].features.filter((t,a)=>a!==e),t)},D=e=>{if(!N)return;let t=N.activeFeatures||[];S("activeFeatures",t.includes(e)?t.filter(t=>t!==e):[...t,e])};return v?(0,r.jsxs)("div",{className:"page-wrapper",children:[(0,r.jsx)("div",{className:"content",children:(0,r.jsx)("div",{className:"card",children:(0,r.jsx)("div",{className:"card-body text-center",children:(0,r.jsx)("h5",{children:"Loading plans..."})})})}),(0,r.jsx)(l.A,{})]}):b?(0,r.jsxs)("div",{className:"page-wrapper",children:[(0,r.jsx)("div",{className:"content",children:(0,r.jsx)("div",{className:"card",children:(0,r.jsxs)("div",{className:"card-body text-center",children:[(0,r.jsxs)("h5",{className:"text-danger",children:["Error: ",b]}),(0,r.jsx)("button",{className:"btn btn-primary mt-2",onClick:O,children:"Try Again"})]})})}),(0,r.jsx)(l.A,{})]}):(0,r.jsxs)("div",{className:"page-wrapper",children:[(0,r.jsxs)("div",{className:"content",children:[(0,r.jsxs)("div",{className:"d-lg-flex align-items-center justify-content-between mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"mb-1",children:"Plans Management"}),(0,r.jsx)("p",{children:"Manage your website pricing plans"})]}),(0,r.jsxs)("ul",{className:"table-top-head",children:[(0,r.jsx)("li",{children:(0,r.jsxs)("button",{className:"btn btn-primary",onClick:()=>{y(C()),w(!1),f(!0)},children:[(0,r.jsx)(i.OiG,{className:"me-1"})," Add New Plan"]})}),(0,r.jsx)(n.default,{})]})]}),(0,r.jsx)("div",{className:"card",children:(0,r.jsx)("div",{className:"card-body",children:(0,r.jsx)("div",{className:"table-responsive",children:(0,r.jsxs)("table",{className:"table table-hover",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"ID"}),(0,r.jsx)("th",{children:"Name (EN)"}),(0,r.jsx)("th",{children:"Name (AR)"}),(0,r.jsx)("th",{children:"Price"}),(0,r.jsx)("th",{children:"Features"}),(0,r.jsx)("th",{children:"Actions"})]})}),(0,r.jsx)("tbody",{children:h.length>0?h.map(e=>{var t,a,s,l;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e._id?e._id.substring(0,8)+"...":"N/A"}),(0,r.jsx)("td",{children:(null===(t=e.english)||void 0===t?void 0:t.name)||"N/A"}),(0,r.jsx)("td",{children:(null===(a=e.arabic)||void 0===a?void 0:a.name)||"N/A"}),(0,r.jsxs)("td",{children:["$",e.price||0]}),(0,r.jsxs)("td",{children:[(null===(l=e.english)||void 0===l?void 0:null===(s=l.features)||void 0===s?void 0:s.length)||0," features"]}),(0,r.jsxs)("td",{children:[(0,r.jsx)("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>k(e),children:(0,r.jsx)(i.uO9,{})}),(0,r.jsx)("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>{e._id&&A(e._id)},disabled:!e._id,children:(0,r.jsx)(i.qbC,{})})]})]},e._id||"unknown")}):(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:6,className:"text-center",children:"No plans available"})})})]})})})})]}),x&&N&&(0,r.jsx)("div",{className:"modal fade show",style:{display:"block"},children:(0,r.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-lg",children:(0,r.jsxs)("div",{className:"modal-content",children:[(0,r.jsxs)("div",{className:"modal-header",children:[(0,r.jsx)("h5",{className:"modal-title",children:g?"Edit Plan":"Add New Plan"}),(0,r.jsx)("button",{type:"button",className:"btn-close",onClick:P})]}),(0,r.jsxs)("div",{className:"modal-body",children:[(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{className:"form-label",children:"Price ($)"}),(0,r.jsx)("input",{type:"number",className:"form-control",value:N.price,onChange:e=>S("price",Number(e.target.value))})]}),(0,r.jsxs)("ul",{className:"nav nav-tabs mb-3",children:[(0,r.jsx)("li",{className:"nav-item",children:(0,r.jsx)("a",{className:"nav-link active","data-bs-toggle":"tab",href:"#english",children:"English"})}),(0,r.jsx)("li",{className:"nav-item",children:(0,r.jsx)("a",{className:"nav-link","data-bs-toggle":"tab",href:"#arabic",children:"Arabic"})})]}),(0,r.jsxs)("div",{className:"tab-content",children:[(0,r.jsxs)("div",{className:"tab-pane active",id:"english",children:[(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{className:"form-label",children:"Name"}),(0,r.jsx)("input",{type:"text",className:"form-control",value:(null===(e=N.english)||void 0===e?void 0:e.name)||"",onChange:e=>S("name",e.target.value,"english")})]}),(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{className:"form-label",children:"Description"}),(0,r.jsx)("textarea",{className:"form-control",rows:3,value:(null===(t=N.english)||void 0===t?void 0:t.description)||"",onChange:e=>S("description",e.target.value,"english")})]}),(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{className:"form-label",children:"Features"}),((null===(a=N.english)||void 0===a?void 0:a.features)||[]).map((e,t)=>{var a;return(0,r.jsxs)("div",{className:"input-group mb-2",children:[(0,r.jsx)("input",{type:"text",className:"form-control",value:e||"",onChange:e=>F(t,e.target.value,"english")}),(0,r.jsx)("div",{className:"input-group-text",children:(0,r.jsx)("input",{type:"checkbox",checked:(null===(a=N.activeFeatures)||void 0===a?void 0:a.includes(t))||!1,onChange:()=>D(t),className:"form-check-input mt-0"})}),(0,r.jsx)("button",{type:"button",className:"btn btn-outline-danger",onClick:()=>I(t,"english"),children:(0,r.jsx)(i.qbC,{})})]},t)}),(0,r.jsxs)("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>T("english"),children:[(0,r.jsx)(i.OiG,{})," Add Feature"]})]})]}),(0,r.jsxs)("div",{className:"tab-pane",id:"arabic",children:[(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{className:"form-label",children:"Name"}),(0,r.jsx)("input",{type:"text",className:"form-control",value:(null===(c=N.arabic)||void 0===c?void 0:c.name)||"",onChange:e=>S("name",e.target.value,"arabic"),dir:"rtl"})]}),(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{className:"form-label",children:"Description"}),(0,r.jsx)("textarea",{className:"form-control",rows:3,value:(null===(o=N.arabic)||void 0===o?void 0:o.description)||"",onChange:e=>S("description",e.target.value,"arabic"),dir:"rtl"})]}),(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{className:"form-label",children:"Features"}),((null===(u=N.arabic)||void 0===u?void 0:u.features)||[]).map((e,t)=>{var a;return(0,r.jsxs)("div",{className:"input-group mb-2",children:[(0,r.jsx)("button",{type:"button",className:"btn btn-outline-danger",onClick:()=>I(t,"arabic"),children:(0,r.jsx)(i.qbC,{})}),(0,r.jsx)("div",{className:"input-group-text",children:(0,r.jsx)("input",{type:"checkbox",checked:(null===(a=N.activeFeatures)||void 0===a?void 0:a.includes(t))||!1,onChange:()=>D(t),className:"form-check-input mt-0"})}),(0,r.jsx)("input",{type:"text",className:"form-control",value:e||"",onChange:e=>F(t,e.target.value,"arabic"),dir:"rtl"})]},t)}),(0,r.jsxs)("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>T("arabic"),children:[(0,r.jsx)(i.OiG,{})," Add Feature"]})]})]})]})]}),(0,r.jsxs)("div",{className:"modal-footer",children:[(0,r.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:P,children:"Cancel"}),(0,r.jsx)("button",{type:"button",className:"btn btn-primary",onClick:_,children:"Save"})]})]})})}),(0,r.jsx)(l.A,{})]})}},24706:(e,t,a)=>{"use strict";a.d(t,{default:()=>c});var r=a(95155),s=a(12115),l=a(11557),n=a(6874),i=a.n(n);let c=()=>{let[e,t]=(0,s.useState)(!1),a=()=>{let a=!e;t(a),a?document.body.classList.add("header-collapse"):document.body.classList.remove("header-collapse")};return(0,r.jsx)("li",{className:"collapse-icons",children:(0,r.jsx)(l.A,{title:"Collapse",children:(0,r.jsx)(i(),{href:"#",id:"collapse-header",className:"".concat(e?"active":""),onClick:e=>{e.preventDefault(),a()},children:(0,r.jsx)("i",{className:"ti ".concat(e?"ti-chevron-down":"ti-chevron-up")})})})})}},74436:(e,t,a)=>{"use strict";a.d(t,{k5:()=>d});var r=a(12115),s={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},l=r.createContext&&r.createContext(s),n=["attr","size","title"];function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach(function(t){var r,s,l;r=e,s=t,l=a[t],(s=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(s))in r?Object.defineProperty(r,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[s]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function d(e){return t=>r.createElement(u,i({attr:o({},e.attr)},t),function e(t){return t&&t.map((t,a)=>r.createElement(t.tag,o({key:a},t.attr),e(t.child)))}(e.child))}function u(e){var t=t=>{var a,{attr:s,size:l,title:c}=e,d=function(e,t){if(null==e)return{};var a,r,s=function(e,t){if(null==e)return{};var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)a=l[r],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}(e,n),u=l||t.size||"1em";return t.className&&(a=t.className),e.className&&(a=(a?a+" ":"")+e.className),r.createElement("svg",i({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,d,{className:a,style:o(o({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),c&&r.createElement("title",null,c),e.children)};return void 0!==l?r.createElement(l.Consumer,null,e=>t(e)):t(s)}}},e=>{var t=t=>e(e.s=t);e.O(0,[6711,6874,1792,1557,8441,1684,7358],()=>t(11753)),_N_E=e.O()}]);